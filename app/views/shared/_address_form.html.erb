<section>
  <% if address.persisted? %>
    <% url = user_address_path(@user, address) %>
    <% method = :patch %>
  <% else %>
    <% url = user_addresses_path(@user) %>
    <% method = :post %>
  <% end %>

  <%= form_with model: [address.user, address], local: true, url: url, method: method do |form| %>
    <h3>Personal Information</h3>
    <div class="field">
      <%= label_tag :first_name %>
      <%= text_field_tag :first_name, @user.first_name %>
    </div>

    <div class="field">
      <%= label_tag :last_name %>
      <%= text_field_tag :last_name, @user.last_name %>
    </div>

    <h3>Address</h3>
    <div class="field">
      <%= form.label :street %>
      <%= form.text_field :street %>
    </div>

    <div class="field">
      <%= form.label :city %>
      <%= form.text_field :city %>
    </div>

    <div class="field">
      <%= form.label :postal_code %>
      <%= form.text_field :postal_code %>
    </div>

    <div class="field">
      <%= form.label :province_id %>
      <%= form.collection_select :province_id, Province.all, :id, :name %>
    </div>

    <%= form.submit %>
  <% end %>
</section>